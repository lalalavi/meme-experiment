{% extends "global/Page.html" %}
{% load otree static %} 

{% block title %}
    Select a meme to post by pressing a number in your KEYBOARD
{% endblock %}

{% block content %}


<!-- need to choose different random images (┛ಠ_ಠ)┛彡┻━┻.-->

<div class="row">
    <div class="column">
      <div class="polaroid">
        <img id='memeshown1' src= {{ static Image }} value="1" style="width:100%">
        <div class="container">
          <p>1</p>
        </div>
      </div>
    </div>
    <div class="column">
      <div class="polaroid">
        <img id='memeshown2' src= {{ static Image2 }} value="2" style="width:100%">
        <div class="container">
          <p>2</p>
        </div>
      </div>
    </div>
    <div class="column">
      <div class="polaroid">
        <img id='memeshown3' src= {{ static Image3 }} value="3" style="width:100%">
        <div class="container">
          <p>3</p>
        </div>
      </div>
    </div>
</div>

<div class="row">
    <div class="column">
      <div class="polaroid">
        <img id='memeshown4' src= {{ static Image4 }}  value="4" style="width:100%">
        <div class="container">
          <p>4</p>
        </div>
      </div>
    </div>
    <div class="column">
      <div class="polaroid">
        <img id='memeshown5' src= {{ static Image5 }}  value="5" style="width:100%">
        <div class="container">
          <p>5</p>
        </div>
      </div>
    </div>
    <div class="column">
      <div class="polaroid">
        <img id='memeshown6' src= {{ static Image6 }}  value="6" style="width:100%">
        <div class="container">
          <p>6</p>
        </div>
      </div>
    </div>
</div>


<!--if you wanted to choose an specific location inside your computer you set up the path like this
   <div class="column">
  <img id='meme-shown3' src="{{ static 'HR/meme7.jpg' }}" alt="Mountains" style="width:100%">
</div> -->

<!-- How to create a row of images with three colums inside  -->

<!-- <div class="row"> 
    <div class="column">
      <img src="img_snow.jpg" alt="Snow" style="width:100%">
    </div>
    <div class="column">
      <img src="img_forest.jpg" alt="Forest" style="width:100%">
    </div>
    <div class="column">
      <img src="img_mountains.jpg" alt="Mountains" style="width:100%">
    </div>
  </div>
</div> -->

 <style>
  /* Three image containers (use 25% for four, and 50% for two, etc) */
  .column {
    float: left;
    width: 33.33%;
    padding: 5px;
  }
  
  /* Clear floats after image containers */
  .row::after {
    content: "";
    clear: both;
    display: table;
    }

.row {
  display: flex;
}

.column {
  flex: 33.33%;
  padding: 5px;
}

/* to make the numbers big and aligned in the middle :D */
/* label {
  display: block;
  text-align: center;
  font-size: 2em;
} */
/* did not use the labels in the end */

body {margin:25px;}

div.polaroid {
  width: 80%;
  background-color: white;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  margin-bottom: 25px;
}

div.container {
  text-align: center;
  padding: 10px 20px;
}
</style>

<!-- keycode seems to change for the top of the keyboard and the numbers in numeric keyboard 
  (one is e.keycode and the other is keycode )

if ((e.key >= 48 && e.key <= 57) || (e.key >= 96 && e.key <= 105)) { // 0-9 only }
 48=0, 49=1, 50=2, 51=3, 52=4, 54=5, 55=6 -->

<!-- Important note: These keycode values are only valid during in keydown and keyup events. 
  On Mac, keypress events give you an completely different set of codes, yay-->

<script> 
    // Hidden Next Button
    let EndButton               = document.createElement('button');
    EndButton.style.visibility  = 'hidden';
    EndButton.className         = 'next_button btn btn-primary btn-large';

    // Create hidden input (Decision)
    let iDec2        = document.createElement("input");
    iDec2.type       = 'hidden';
    iDec2.name       = 'iDec2';
    iDec2.id         = 'iDec2';
    iDec2.value      = '';

    let dRT          = document.createElement("input");
    dRT.type         = 'hidden';
    dRT.name         = 'dRTPost';
    dRT.id           = 'dRTPost';
    dRT.value        = '';
    var TStart       = new Date().getTime();
    var TEnd         = new Date().getTime();

    document.addEventListener("DOMContentLoaded", function(debug=true) {
        console.log('Loading info');

        let OtreeBody     = document.getElementsByClassName("_otree-content")[0];
        OtreeBody.appendChild(iDec2);
        OtreeBody.appendChild(dRT);
        OtreeBody.appendChild(EndButton);

        // take variables from python into javascript

        let ImageID = js_vars.ImageID;
        let Image2ID = js_vars.Image2ID;
        let Image3ID = js_vars.Image3ID;
        let Image4ID = js_vars.Image4ID;
        let Image5ID = js_vars.Image5ID;
        let Image6ID = js_vars.Image6ID;

        // Add event listener for pressing numbers
        document.addEventListener("keyup", function(event) {
          console.log(event.key);
        if (event.key === '1')   {
            // change input value
            iDec2.value = ImageID ;
            console.log('1 was pressed');
            TEnd      = new Date().getTime();
            dRT.value = +TEnd -TStart;
            // press next button
            EndButton.click();
        }
        if (event.key === '2') {
            iDec2.value = Image2ID;
            console.log('2 was pressed');
            TEnd      = new Date().getTime();
            dRT.value = +TEnd -TStart;
            EndButton.click();
        } 
        if (event.key === '3') {
            iDec2.value = Image3ID;
            console.log('3 was pressed');
            TEnd      = new Date().getTime();
            dRT.value = +TEnd -TStart;
            EndButton.click();
        }
        if (event.key === '4') {
            iDec2.value = Image4ID;
            console.log('4 was pressed');
            TEnd      = new Date().getTime();
            dRT.value = +TEnd -TStart;
            EndButton.click();
        }
        if (event.key === '5') {
            iDec2.value = Image5ID;
            console.log('5 was pressed');
            TEnd      = new Date().getTime();
            dRT.value = +TEnd -TStart;
            EndButton.click();
        }
        if (event.key === '6') {
            iDec2.value = Image6ID;
            TEnd      = new Date().getTime();
            dRT.value = +TEnd -TStart;
            console.log('6 was pressed');
            EndButton.click();
        }});
    });
</script>  

<!-- could have also done
  if ((event.keyCode ===50) || (event.keyCode === 97)) if 2 or 2 in keypad is pressed -->
{% endblock %}
